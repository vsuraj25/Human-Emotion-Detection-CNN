schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/Emotion_Detector/pipeline/stage01_data_ingestion.py
    deps:
    - path: configs/config.yaml
      md5: cb886a613ed18fa9b6070312bb18b7a6
      size: 1552
    - path: src/Emotion_Detector/pipeline/stage01_data_ingestion.py
      md5: 439da56c76bd08da5179a9a7bc86a67b
      size: 739
    outs:
    - path: artifacts/data_ingestion/raw_data/data.zip
      md5: 9f58794746ff496be12cf0bb2679e3d4
      size: 63252113
    - path: artifacts/data_ingestion/test
      md5: 75809b672b10f68a6450816ccbdb7670.dir
      size: 11324320
      nfiles: 7178
    - path: artifacts/data_ingestion/train
      md5: 06ac7dc0f0fdf83e3789a27f9d68360e.dir
      size: 45185869
      nfiles: 28709
  data_preprocessing:
    cmd: python src/Emotion_Detector/pipeline/stage02_data_preprocessing.py
    deps:
    - path: artifacts/data_ingestion/test
      md5: 75809b672b10f68a6450816ccbdb7670.dir
      size: 11324320
      nfiles: 7178
    - path: artifacts/data_ingestion/train
      md5: 06ac7dc0f0fdf83e3789a27f9d68360e.dir
      size: 45185869
      nfiles: 28709
    - path: configs/config.yaml
      md5: cb886a613ed18fa9b6070312bb18b7a6
      size: 1552
    - path: params.yaml
      md5: 913494cb2f0b1357ced9b573ba46a427
      size: 532
    - path: src/Emotion_Detector/pipeline/stage02_data_preprocessing.py
      md5: 750d1b00c8c1b8f0417f6e3fff919916
      size: 754
    params:
      params.yaml:
        BATCH_SIZE: 32
        IMAGE_SIZE: 256
        RANDOM_CONTRAST_FACTOR: 0.1
        RANDOM_FLIP_MODE: horizontal
        RANDOM_ROTATION_LEFT_FACTOR: -0.025
        RANDOM_ROTATION_RIGHT_FACTOR: 0.025
        SHUFFLE: true
        TEST_NUM_SHARDS: 5
        TRAIN_NUM_SHARDS: 10
    outs:
    - path: artifacts/data_preprocessing/test_tfrecords
      md5: 38ee819c6f3cdfe7c7201e24a6bad747.dir
      size: 472863362
      nfiles: 5
    - path: artifacts/data_preprocessing/train_tfrecords
      md5: dd4d67d9388a9de238e8bee72f127e58.dir
      size: 1884176960
      nfiles: 10
  model_training:
    cmd: python src/Emotion_Detector/pipeline/stage03_model_training.py
    deps:
    - path: artifacts/data_preprocessing/test_tfrecords
      md5: 38ee819c6f3cdfe7c7201e24a6bad747.dir
      size: 472863362
      nfiles: 5
    - path: artifacts/data_preprocessing/train_tfrecords
      md5: dd4d67d9388a9de238e8bee72f127e58.dir
      size: 1884176960
      nfiles: 10
    - path: configs/config.yaml
      md5: cb886a613ed18fa9b6070312bb18b7a6
      size: 1552
    - path: params.yaml
      md5: 913494cb2f0b1357ced9b573ba46a427
      size: 532
    - path: src/Emotion_Detector/pipeline/stage03_model_training.py
      md5: 463ea03b8d5b2f328430e7df9ae2418b
      size: 695
    params:
      params.yaml:
        BATCH_SIZE: 32
        DROPOUT_RATE: 0.0
        EPOCHS: 20
        IMAGE_SIZE: 256
        KERNAL_SIZE: 3
        LEARNING_RATE: 0.001
        NUM_CLASSES: 7
        N_DENSE_1: 100
        N_DENSE_2: 10
        N_FILTERS: 6
        N_STRIDES: 1
        POOL_SIZE: 2
        REGULARIZATION_RATE: 0.0
    outs:
    - path: artifacts/model_training/model
      md5: e8137b29f51368fcf521028850d56f57.dir
      size: 74267464
      nfiles: 4
    - path: artifacts/model_training/model_callbacks
      md5: b3192f930aa5854912e9924b30020f01.dir
      size: 73848884
      nfiles: 3
    - path: artifacts/model_training/model_history
      md5: 576c5148dd7c0e4b8939221dc060eb57.dir
      size: 2434
      nfiles: 1
    - path: artifacts/model_training/tensorboard_log_dir
      md5: 6787fb5adc44839f6f8d5920751acbdb.dir
      size: 550869
      nfiles: 2
